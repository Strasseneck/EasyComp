# view registrations for competition
@app.route("/registrations/<competition>", methods=["GET"])
@login_required
def registrations(competition):

    #get id and name of competition
    rows = db.execute("SELECT DISTINCT id, name FROM competitions WHERE name LIKE ?", competition)
    comp_id = rows[0]["id"]
    compname = rows[0]["name"]
    
    registrations = []
    divisions = {}
    divnames = []
    divids = []
    # get division name and id
    rows = db.execute("SELECT DISTINCT id, name FROM divisions INNER JOIN competitors on competitors.division_id = divisions.id WHERE competition_id = ?", comp_id)
    for i in range(len(rows)):
        divname = rows[i]["name"]
        divnames.append(divname)
        divid = rows[i]["id"] 
        divids.append(divid)

    # get competitors names for each division
    for i in range(len(divids)):
        competitors = []
        divid = divids[i] 
        divname = divnames[i]
        rows = db.execute("SELECT DISTINCT firstname, lastname FROM users INNER JOIN competitors on competitors.competitor_id = users.id WHERE division_id = ?", divid)
        for j in range(len(rows)):
            competitor = (rows[j]["firstname"] + " " + rows[j]["lastname"])
            competitors.append(competitor)
        # add values to divisions dict        
        divisions["division"] = divname
        divisions["competitors"] = competitors
        # append registrations list with the divisions dictionary
        registrations.append(divisions)
   
        
    print(registrations)
    return render_template("view-comp-registrations.html", divnames=divnames, compname=compname, registrations=registrations

   {'Blue Rooster 57.5kg': [{'id': 1, 'competitor1_name': 'Max Musterman', 'competitor2_name': 'Joe Bloggs'}, {'id': 2, 'competitor1_name': 'Sven Svensson', 'competitor2_name': 'John Smith'}], 
   'Blue Superfeather 65kg': [{'id': 3, 'competitor1_name': 'John Smith', 'competitor2_name': 'Joe Bloggs'}]}